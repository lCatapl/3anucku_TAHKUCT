<!DOCTYPE html>
<html>
<head>
    <!-- PWA + –ó–í–£–ö–ò + –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø -->
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="#10b981">
<link rel="apple-touch-icon" href="/static/icon-192.png">

<script>
if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/sw.js');
}

// –ó–í–£–ö–ò
const sounds = {
    coin: new Audio('data:audio/wav;base64,UklGRl...'),
    victory: new Audio('data:audio/wav;base64,UklGRp...'),
    tank: new Audio('data:audio/wav;base64,UklGRo...')
};

// PUSH –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø
function notify(title, body) {
    if (Notification.permission === 'granted') {
        new Notification(title, {body, icon: '/static/icon-192.png'});
    }
}

// LIVE LIVE LIVE –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
setInterval(async () => {
    try {
        const res = await fetch('/api/live-data');
        const data = await res.json();
        document.getElementById('live-silver').textContent = data.silver.toLocaleString() + ' ü™ô';
        if (data.silver > 1000000) sounds.coin.play();
    } catch(e) {}
}, 1000);
</script>
    <title>{% block title %}–¢–∞–Ω–∫–∏—Å—Ç{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0/fontawesome.min.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>
<body class="bg-gradient-to-br from-gray-900 to-black text-white">
    <!-- NAV —Å LIVE —Å–µ—Ä–µ–±—Ä–æ–º -->
    <nav class="glass-panel fixed top-0 w-full z-50 backdrop-blur-xl">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between items-center py-4">
                <a href="/" class="text-3xl font-black bg-gradient-to-r from-emerald-400 to-green-500 bg-clip-text text-transparent">
                    <i class="fas fa-fire"></i> –¢–∞–Ω–∫–∏—Å—Ç
                </a>
                
                {% if session.user_id %}
                <div class="flex items-center gap-6">
                    <!-- LIVE —Å–µ—Ä–µ–±—Ä–æ -->
                    <div id="live-silver" class="text-2xl font-bold flex items-center gap-2">
                        <i class="fas fa-coins text-yellow-400"></i>
                        <span>1,000,000 ü™ô</span>
                    </div>
                    <a href="/garage" class="btn-primary"><i class="fas fa-warehouse"></i></a>
                    <a href="/battle" class="btn-danger"><i class="fas fa-fire"></i> –ê—Ä–µ–Ω–∞</a>
                    <a href="/leaderboard" class="btn-secondary">üèÜ –¢–æ–ø</a>
                    <a href="/profile" class="btn-primary">{{ player.username }}</a>
                    <a href="/logout" class="btn-gray">–í—ã—Ö–æ–¥</a>
                </div>
                {% endif %}
            </div>
        </div>
    </nav>

    <!-- LIVE –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ -->
    <script>
    setInterval(async () => {
        const res = await axios.get('/api/live-data');
        document.getElementById('live-silver').innerHTML = 
            `<i class="fas fa-coins text-yellow-400"></i> ${res.data.silver.toLocaleString()} ü™ô`;
    }, 1000);
    </script>

    {% block content %}{% endblock %}
</body>
</html>

