{% extends "base.html" %}
{% block content %}
<div class="max-w-6xl mx-auto px-6 py-12">
    <!-- üéØ –°–¢–ê–¢–ò–°–¢–ò–ö–ê ONLINE (–∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è) -->
    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-16">
        <div class="stat-card bg-gradient-to-br from-emerald-500/90 to-green-600/90 text-white p-8 rounded-3xl shadow-2xl hover:scale-105 transition-all duration-300 border-4 border-white/20">
            <div class="text-3xl font-black mb-2" id="live-online">42</div>
            <div class="text-lg opacity-90">üë• –û–Ω–ª–∞–π–Ω —Å–µ–π—á–∞—Å</div>
            <div class="text-sm opacity-70 mt-2 animate-pulse">‚ö° –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è</div>
        </div>
        <div class="stat-card bg-gradient-to-br from-yellow-500/90 to-orange-600/90 text-white p-8 rounded-3xl shadow-2xl hover:scale-105 transition-all duration-300 border-4 border-white/20">
            <div class="text-3xl font-black mb-2" id="live-afk">15</div>
            <div class="text-lg opacity-90">üò¥ –ê–§–ö</div>
        </div>
        <div class="stat-card bg-gradient-to-br from-purple-500/90 to-pink-600/90 text-white p-8 rounded-3xl shadow-2xl hover:scale-105 transition-all duration-300 border-4 border-white/20">
            <div class="text-3xl font-black mb-2" id="live-total">1,247</div>
            <div class="text-lg opacity-90">üëë –í—Å–µ–≥–æ –∏–≥—Ä–æ–∫–æ–≤</div>
        </div>
        <div class="stat-card bg-gradient-to-br from-blue-500/90 to-indigo-600/90 text-white p-8 rounded-3xl shadow-2xl hover:scale-105 transition-all duration-300 border-4 border-white/20">
            <div class="text-3xl font-black mb-2" id="live-gold">‚ÇΩ24.5M</div>
            <div class="text-lg opacity-90">üí∞ –û–±—â–µ–µ –∑–æ–ª–æ—Ç–æ</div>
        </div>
    </div>

    <!-- üéÆ –ö–ù–û–ü–ö–ò –ù–ê–í–ò–ì–ê–¶–ò–Ø -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-16">
        <a href="{{ url_for('profile', user_id=player.id if player else '') or url_for('profile') }}">
            <i class="fas fa-user-circle text-5xl mb-4 group-hover:text-emerald-400"></i>
            <div class="text-2xl font-black mb-2">üë§ –ü—Ä–æ—Ñ–∏–ª—å</div>
            <div class="opacity-75">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –Ω–∞–≥—Ä–∞–¥—ã</div>
        </a>
        <a href="{{ url_for('garage') }}" class="nav-card bg-gradient-to-br from-emerald-600 to-green-700 hover:from-emerald-500 hover:to-green-600 text-white p-10 rounded-3xl shadow-2xl hover:scale-105 transition-all duration-300 border-4 border-emerald-500/50 text-center group">
            <i class="fas fa-warehouse text-5xl mb-4 group-hover:text-yellow-300"></i>
            <div class="text-2xl font-black mb-2">üè™ –ì–∞—Ä–∞–∂</div>
            <div class="opacity-75">–¢–≤–æ–∏ —Ç–∞–Ω–∫–∏</div>
        </a>
        <a href="{{ url_for('shop') }}" class="nav-card bg-gradient-to-br from-amber-500 to-orange-600 hover:from-amber-400 hover:to-orange-500 text-white p-10 rounded-3xl shadow-2xl hover:scale-105 transition-all duration-300 border-4 border-amber-400/50 text-center group">
            <i class="fas fa-store text-5xl mb-4 group-hover:text-white"></i>
            <div class="text-2xl font-black mb-2">üõí –ú–∞–≥–∞–∑–∏–Ω</div>
            <div class="opacity-75">–ü–æ–∫—É–ø–∞–π —Ç–∞–Ω–∫–∏!</div>
        </a>
        <a href="/battle" class="nav-card bg-gradient-to-br from-red-600 to-rose-700 hover:from-red-500 hover:to-rose-600 text-white p-10 rounded-3xl shadow-2xl hover:scale-105 transition-all duration-300 border-4 border-red-500/50 text-center group">
            <i class="fas fa-crosshairs text-5xl mb-4 group-hover:text-yellow-300"></i>
            <div class="text-2xl font-black mb-2">‚öîÔ∏è –ë–æ–∏</div>
            <div class="opacity-75">PvP / –ë–æ—Ç</div>
        </a>
    </div>
</div>

<script>
// üî• LIVE –°–¢–ê–¢–ò–°–¢–ò–ö–ê –∫–∞–∂–¥—É—é 1 —Å–µ–∫
setInterval(async () => {
    try {
        const res = await fetch('/api/stats');
        const stats = await res.json();
        
        document.getElementById('live-online').textContent = stats.online;
        document.getElementById('live-afk').textContent = stats.afk;
        document.getElementById('live-total').textContent = stats.total.toLocaleString();
        
        // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –∑–æ–ª–æ—Ç–æ –∫—Ä–∞—Å–∏–≤–æ
        const goldK = (stats.gold / 1000).toLocaleString('ru-RU', {maximumFractionDigits: 1});
        document.getElementById('live-gold').textContent = goldK + 'K‚ÇΩ';
        
    } catch(e) {
        console.log('Live stats failed');
    }
}, 1000);  // –ö–∞–∂–¥—ã–µ 2 —Å–µ–∫ = –Ω–µ –Ω–∞–≥—Ä—É–∂–∞–µ—Ç
</script>
{% endblock %}



